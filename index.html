<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ª±c h√†nh x∆∞·ªüng LABS - Version 1.1</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; background-color: #f4f4f9; max-width: 800px; margin: auto; }
        h1 { color: #2c3e50; text-align: center; margin-bottom: 30px; }
        .category { background: #fff; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border: 1px solid #ddd; }
        .category-header { background: #3498db; color: white; padding: 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-weight: bold; font-size: 1.1em; }
        .category-content { display: none; padding: 20px; background: #fff; }
        .check-item { margin-bottom: 25px; padding-bottom: 20px; border-bottom: 2px solid #f0f0f0; }
        .check-item:last-child { border-bottom: none; }
        label { display: block; margin-bottom: 10px; font-weight: bold; color: #2c3e50; font-size: 1em; }
        
        /* √î text k·∫øt qu·∫£ to g·∫•p ƒë√¥i */
        textarea { 
            width: 100%; 
            min-height: 150px; 
            padding: 12px; 
            border: 1px solid #ccc; 
            border-radius: 6px; 
            box-sizing: border-box; 
            font-family: inherit;
            font-size: 14px;
            resize: vertical;
            background-color: #fafafa;
        }

        .photo-container { margin-top: 15px; display: flex; flex-wrap: wrap; gap: 15px; }
        .photo-wrapper { text-align: center; width: 120px; }
        .photo-preview { width: 120px; height: 120px; object-fit: cover; border: 2px solid #ddd; border-radius: 6px; }
        
        .btn-capture { 
            background: #27ae60; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 6px; 
            cursor: pointer; 
            margin-top: 10px; 
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-capture:hover { background: #219150; }
        .img-name { font-size: 0.75em; color: #666; margin-top: 5px; word-break: break-all; }
        
        /* Icon m≈©i t√™n s·∫°ch s·∫Ω */
        .arrow { transition: transform 0.3s; }
        .open .arrow { transform: rotate(180deg); }
    </style>
</head>
<body>

    <h1>Th·ª±c h√†nh x∆∞·ªüng LABS</h1>

    <div class="category">
        <div class="category-header" onclick="toggleCategory(this)">
            1. AN TO√ÄN K·∫æT C·∫§U (STRUCTURAL SAFETY)
            <svg class="arrow" width="20" height="20" viewBox="0 0 20 20" fill="white"><path d="M5 7l5 5 5-5z"/></svg>
        </div>
        <div class="category-content">
            <div class="check-item">
                <label>1.1 Ki·ªÉm tra v·∫øt n·ª©t tr√™n d·∫ßm, c·ªôt v√† s√†n b√™ t√¥ng</label>
                <textarea placeholder="Nh·∫≠p ghi nh·∫≠n chi ti·∫øt v·ªÅ v·ªã tr√≠, chi·ªÅu d√†i v√† ƒë·ªô r·ªông v·∫øt n·ª©t..."></textarea>
                <input type="file" accept="image/*" multiple onchange="handleFiles(this, 'KetCau_VetNut')" style="display:none">
                <button class="btn-capture" onclick="this.previousElementSibling.click()">üì∑ Ch·ª•p/Ch·ªçn nhi·ªÅu h√¨nh</button>
                <div class="photo-container"></div>
            </div>
            <div class="check-item">
                <label>1.2 Ki·ªÉm tra t·∫£i tr·ªçng v√† d·∫•u hi·ªáu v√µng k·∫øt c·∫•u</label>
                <textarea placeholder="Ghi nh·∫≠n t√¨nh tr·∫°ng ch·∫•t h√†ng qu√° cao, m√°y m√≥c h·∫°ng n·∫∑ng t·∫≠p trung m·ªôt ch·ªó..."></textarea>
                <input type="file" accept="image/*" multiple onchange="handleFiles(this, 'KetCau_TaiTrong')" style="display:none">
                <button class="btn-capture" onclick="this.previousElementSibling.click()">üì∑ Ch·ª•p/Ch·ªçn nhi·ªÅu h√¨nh</button>
                <div class="photo-container"></div>
            </div>
        </div>
    </div>

    <div class="category">
        <div class="category-header" onclick="toggleCategory(this)">
            2. AN TO√ÄN CH√ÅY N·ªî (FIRE SAFETY)
            <svg class="arrow" width="20" height="20" viewBox="0 0 20 20" fill="white"><path d="M5 7l5 5 5-5z"/></svg>
        </div>
        <div class="category-content">
            <div class="check-item">
                <label>2.1 L·ªëi tho√°t n·∫°n v√† C·ª≠a tho√°t hi·ªÉm (Egress)</label>
                <textarea placeholder="Ki·ªÉm tra v·∫≠t c·∫£n, c·ª≠a c√≥ t·ª± ƒë√≥ng, h∆∞·ªõng m·ªü, kh√≥a x√≠ch..."></textarea>
                <input type="file" accept="image/*" multiple onchange="handleFiles(this, 'PCCC_ThoatNan')" style="display:none">
                <button class="btn-capture" onclick="this.previousElementSibling.click()">üì∑ Ch·ª•p/Ch·ªçn nhi·ªÅu h√¨nh</button>
                <div class="photo-container"></div>
            </div>
            <div class="check-item">
                <label>2.2 H·ªá th·ªëng chi·∫øu s√°ng kh·∫©n c·∫•p v√† Bi·ªÉn b√°o</label>
                <textarea placeholder="Ki·ªÉm tra v·ªã tr√≠ l·∫Øp ƒë·∫∑t ƒë√®n s·ª± c·ªë, bi·ªÉn Exit, ki·ªÉm tra n√∫t test ƒë√®n..."></textarea>
                <input type="file" accept="image/*" multiple onchange="handleFiles(this, 'PCCC_DenBien')" style="display:none">
                <button class="btn-capture" onclick="this.previousElementSibling.click()">üì∑ Ch·ª•p/Ch·ªçn nhi·ªÅu h√¨nh</button>
                <div class="photo-container"></div>
            </div>
            <div class="check-item">
                <label>2.3 NgƒÉn ch√°y lan v√† Kho h√≥a ch·∫•t</label>
                <textarea placeholder="Ki·ªÉm tra t∆∞·ªùng ngƒÉn ch√°y, c·ª≠a ngƒÉn ch√°y, khay ch·ªëng tr√†n h√≥a ch·∫•t..."></textarea>
                <input type="file" accept="image/*" multiple onchange="handleFiles(this, 'PCCC_NganChay')" style="display:none">
                <button class="btn-capture" onclick="this.previousElementSibling.click()">üì∑ Ch·ª•p/Ch·ªçn nhi·ªÅu h√¨nh</button>
                <div class="photo-container"></div>
            </div>
        </div>
    </div>

    <div class="category">
        <div class="category-header" onclick="toggleCategory(this)">
            3. AN TO√ÄN ƒêI·ªÜN (ELECTRICAL SAFETY)
            <svg class="arrow" width="20" height="20" viewBox="0 0 20 20" fill="white"><path d="M5 7l5 5 5-5z"/></svg>
        </div>
        <div class="category-content">
            <div class="check-item">
                <label>3.1 T√¨nh tr·∫°ng T·ªß ƒëi·ªán v√† V·ªá sinh c√¥ng nghi·ªáp</label>
                <textarea placeholder="Ki·ªÉm tra x∆° b·ª•i v·∫£i t√≠ch t·ª•, v·∫≠t li·ªáu d·ªÖ ch√°y g·∫ßn t·ªß ƒëi·ªán, n·∫Øp ƒë·∫≠y thi·∫øt b·ªã..."></textarea>
                <input type="file" accept="image/*" multiple onchange="handleFiles(this, 'Dien_TuDien')" style="display:none">
                <button class="btn-capture" onclick="this.previousElementSibling.click()">üì∑ Ch·ª•p/Ch·ªçn nhi·ªÅu h√¨nh</button>
                <div class="photo-container"></div>
            </div>
            <div class="check-item">
                <label>3.2 Ki·ªÉm tra nhi·ªát ƒë·ªô (Camera nhi·ªát)</label>
                <textarea placeholder="Ghi nh·∫≠n c√°c ƒëi·ªÉm ti·∫øp x√∫c c√≥ nhi·ªát ƒë·ªô b·∫•t th∆∞·ªùng (>30¬∞C so v·ªõi m√¥i tr∆∞·ªùng)..."></textarea>
                <input type="file" accept="image/*" multiple onchange="handleFiles(this, 'Dien_NhietDo')" style="display:none">
                <button class="btn-capture" onclick="this.previousElementSibling.click()">üì∑ Ch·ª•p/Ch·ªçn nhi·ªÅu h√¨nh</button>
                <div class="photo-container"></div>
            </div>
            <div class="check-item">
                <label>3.3 H·ªá th·ªëng d√¢y d·∫´n v√† N·ªëi ƒë·∫•t</label>
                <textarea placeholder="Ki·ªÉm tra d√¢y d·∫´n h·ªü, m·ªëi n·ªëi kh√¥ng an to√†n, t√¨nh tr·∫°ng d√¢y ti·∫øp ƒë·ªãa..."></textarea>
                <input type="file" accept="image/*" multiple onchange="handleFiles(this, 'Dien_TiepDia')" style="display:none">
                <button class="btn-capture" onclick="this.previousElementSibling.click()">üì∑ Ch·ª•p/Ch·ªçn nhi·ªÅu h√¨nh</button>
                <div class="photo-container"></div>
            </div>
        </div>
    </div>

    <script>
        function toggleCategory(header) {
            const content = header.nextElementSibling;
            const parent = header.parentElement;
            
            if (content.style.display === "block") {
                content.style.display = "none";
                header.classList.remove('open');
            } else {
                content.style.display = "block";
                header.classList.add('open');
            }
        }

        function handleFiles(input, itemName) {
            const container = input.parentElement.querySelector('.photo-container');
            const files = Array.from(input.files);
            
            // L·∫•y ng√†y hi·ªán t·∫°i ƒë·ªãnh d·∫°ng DDMMYYYY
            const now = new Date();
            const dateStr = String(now.getDate()).padStart(2, '0') + 
                            String(now.getMonth() + 1).padStart(2, '0') + 
                            now.getFullYear();

            files.forEach((file, index) => {
                const reader = new FileReader();
                const fileNameCustom = `${dateStr}_${itemName}_${index + 1}.jpg`;
                
                reader.onload = function(e) {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'photo-wrapper';
                    
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'photo-preview';
                    
                    const nameLabel = document.createElement('div');
                    nameLabel.className = 'img-name';
                    nameLabel.innerText = fileNameCustom;
                    
                    wrapper.appendChild(img);
                    wrapper.appendChild(nameLabel);
                    container.appendChild(wrapper);
                }
                reader.readAsDataURL(file);
            });
        }
    </script>
</body>
</html>
